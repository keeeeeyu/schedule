{% extends 'home.html' %}

{% block content %}

<div id="clock-body">

    <div class="column1">

        <h1>Welcome {{ first_name }}</h1>
        <h1>{{ now }}</h1>
        <p id="location"></p>
    </div>
    
    <div class="column2">
        
        {% if clock_in_verification %}
    
            <form action="{% url 'clock_in' %}" method="POST">
                {% csrf_token %}
                <button class="clock-button" type="submit">Clock In</button>
            </form>

        {% else %}

            <form action="{% url 'clock_out' %}" method="POST">
                {% csrf_token %}
                <button class="clock-button" type="submit">Clock Out</button>
            </form>

        {% endif %}

        <form action="{% url 'break_time' %}" method="POST">
            {% csrf_token %}
        
                <button class="clock-button" type="submit">Break In</button>    
            
        </form>
        <h2>
            {% if messages %}
                {% for message in messages %}
                <div>{{ message }}</div>
                {% endfor %}
            {% endif %}
        </h2>
        <hr>

        <fieldset>
            <legend>{{ date_today }}</legend>
            <table>
                <tr>
                <th>Clock In</th> 
                <th>Clock Out</th>
                <th>Break In</th>
                <th>Break Out</th>
                <th>Hours Worked</th>
                </tr>
                <tr>
                    <th>{{ clock_in_time }}</th>
                    <th>{{ clock_out_time }}</th>
                    <th>{{ break_in_time }}</th>
                    <th>{{ break_out_time }}</th>
                    <th>{{ net_hours_worked }} Hours</th>
                </tr>
            </table>
        </fieldset>
        <hr>
    </div>
</div>
<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    function showPosition(position) {
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;

        // You may use an external service to reverse geocode the coordinates to get location information.
        // For simplicity, let's just display the coordinates in this example.
        const locationInfo = `Latitude: ${latitude}, Longitude: ${longitude}`;
        document.getElementById("location").innerText = locationInfo;
    }

    // Call the getLocation function when the page loads
    getLocation();
</script>




{% endblock content %}

